{{ define "main" }}
<div class="max-w-5xl mx-auto px-4 py-12">
  <h1 class="text-4xl font-bold mb-6 text-center">{{ .Title }}</h1>
  <p class="text-center text-gray-700 mb-12">{{ .Content }}</p>

  <!-- Authors container: grid with centered items -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 justify-items-center">
    {{ range .Pages }}
      <!-- Card wrapper with flex to make buttons stick to bottom -->
      <div class="h-full w-full max-w-xs flex">
        <div class="border rounded-lg shadow hover:shadow-lg transition p-6 flex flex-col justify-between items-center text-center w-full">
          
          <!-- Main content -->
          <div>
            <!-- Avatar -->
            {{ with .Resources.GetMatch "avatar*" }}
              <img src="{{ .RelPermalink }}" alt="{{ .Title }}" class="w-32 h-32 rounded-full mb-4">
            {{ end }}

            <!-- Name + optional status emoji -->
            <h2 class="text-xl font-semibold flex items-center gap-2 justify-center">
              {{ .Title }}
              {{ with .Params.status.icon }}
                <span>{{ . }}</span>
              {{ end }}
            </h2>

            <!-- Role/position -->
            {{ with .Params.role }}
              <p class="text-sm text-gray-500 mt-1">{{ . }}</p>
            {{ end }}

            <!-- Bio / content -->
            {{ with .Content }}
              <p class="text-gray-600 mt-3 text-sm">{{ . }}</p>
            {{ end }}

            <!-- Organizations -->
            {{ with .Params.organizations }}
              <p class="mt-3 text-sm">
                {{ range $i, $org := . }}
                  <a href="{{ $org.url }}" target="_blank" class="text-blue-600 hover:underline">{{ $org.name }}</a>{{ if lt (add $i 1) (len .) }} | {{ end }}
                {{ end }}
              </p>
            {{ end }}
          </div>

          <!-- Profiles / Email button pinned at bottom -->
          {{ with .Params.profiles }}
            <div class="mt-6 flex flex-wrap justify-center gap-3">
              {{ range . }}
                {{ if eq .icon "at-symbol" }}
                  <!-- Email button as purple button -->
                  <a href="{{ .url }}" style="background-color:#7C3AED; color:white;" class="px-4 py-2 rounded-lg hover:opacity-90 transition text-sm flex items-center gap-1">
                    {{ .label }}
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
                    </svg>
                  </a>
                {{ else }}
                  <!-- Other links -->
                  <a href="{{ .url }}" target="_blank" class="text-blue-500 hover:underline text-sm">{{ .label }}</a>
                {{ end }}
              {{ end }}
            </div>
          {{ end }}

        </div>
      </div>
    {{ end }}
  </div>
</div>
{{ end }}
